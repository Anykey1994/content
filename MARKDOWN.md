# Markdown

Документация Druki использует [CommonMark Markdown](https://commonmark.org/) стандарт с собственными расширениями.

CommonMark ничем не выделяется от стандартного Markdown, кроме того, что он задокументирован и стандартизован. Если вы знакомы с Markdown, то вас заинтересует только [раздел собственных расширений и синтаксиса](#custom-syntax). Тем не менее, рекоендуется пробежаться по основному синтаксису, чтобы узнать о дополнительных требованиях в пределах проекта.

## Базовые возможности Markdown

Ниже приведены примеры использования и локальные требования.

### Заголовки

Для заголовков используем `#`.

Пример:

```markdown
# Заголовок 1 уровня
## Заголовок 2 уровня
### Заголовок 3 уровня
#### Заголовок 4 уровня
##### Заголовок 5 уровня
###### Заголовок 6 уровня
```

Не допускается использование заголовка 1 уровня, так как он автоматически создается системой на странице из мета-информации. Внутри материала используйте какие хотите, но желательнно в пределах 2-4 уровней.

### Полужирный и курсив

**Полужирный** текст делаем при помощи удвоенного символа `*`:

```markdown
**Полужирный** текст
```

_Курсивный_ текст при помощи одиночного `_`:

```markdown
_Курсивный_ текст
```

Если нужно _**комбо**_, используем одновременно символ `_` и удвоенный `**`:

```markdown
_**Этот текст и курсивный, и полужирный.**_
```

### Списки

#### Маркированный список

Для создания маркированного списка можно использовать символы `*`, `-` или `+`.

```markdown
* Раз
* Два
* Три
```

Для вложенных пунктов в начале строки добавляется отступ. Допустимо от двух до пяти пробелов чтобы создать отступ. Рекомендуется 2 пробела.

```markdown
* Раз
  * Два
    * Три
  * Четыре
  * Пять
* Шесть
```

#### Нумерованный список

Для создания нумерованного списка нужно использовать цифру с точкой `.` после неё.

```markdown
1. Раз
1. Два
1. Три
```

Для вложенных пунктов в начале строки добавляется отступ. Допустимо от двух до пяти пробелов чтобы создать отступ. Рекомендуется 3 пробела.

```markdown
1. Раз
   1. Два
   1. Три
1. Четыре
```

Для удобства написания нумерованного списка, а также, его дальнейшее редактирование, рекомендуется использовать `1.` для всех пунктов. Нумерация будет проставлена корректно и не придется её корректировать руками.

### Ссылки

Обычные ссылки составяют из двух частей:

1. `[текст ссылки]`
1. `(URL)` — URL на который ссылается данная ссылка.

Пример:

```markdown
[Официальный сайт Drupal сообщества](https://drupal.org)
```

Для того чтобы сослаться на материалы из репозитория, а также, содержимое на сайте, необходимо использовать относительные ссылки на файлы, содержащие контент.

Ссылки пишутся относительно материала, в котором вы вставляете ссылку, но в пределах корня репозитория.

Например, имеем следующу структуру:

```
 | docs/
 |- ru/
 |-- 8/
 |--- installation.md
 |--- drush.md
 |--- changelog/
 |---- changelog.md
```

Примеры ссылок и куда они приведут:

| Редактируемый файл                 | Ссылка                                       | Куда приведет |
|------------------------------------|----------------------------------------------|---------------|
| `docs/ru/8/installation.md`        | `[Drush](drush.md)`                          | `docs/ru/8/drush.md` |
| `docs/ru/8/installation.md`        | `[Список изменений](changelog/changelog.md)` | `docs/ru/8/changelog/changelog.md` |
| `docs/ru/8/changelog/changelog.md` | `[Установка](../installation.md)`            | `docs/ru/8/installation.md` |

Конечные ссылки будуте в дальнейшем замененеы на настоящие URL материалов и их алиасы, так что, всё что нужно, сослаться на нужный файл в репозитории, относительно текущего.

### Код

#### Код как часть текста

Если часть кода необходимо вставить в тексте, он заключается в  кавычки `\``.

```markdown
Вот так пишется "Привер Мир!" в PHP: `echo "Hello World";`.
```

### Многострочный код

Код содержащий несколько строк, должен оборачиваться при помощи утроенного символа `\`` с последущим названием языка программирования, чей код представлен в данном блоке. 

_Отступы в примере сделаны чтобы вставить пример кода в код._

```markdown
    ```php
    <?php

    /**
    * @file
    * Includes the autoloader created by Composer.
    *
    * This file was generated by drupal-composer/drupal-scaffold.
    * https://github.com/drupal-composer/drupal-scaffold
    *
    * @see composer.json
    * @see index.php
    * @see core/install.php
    * @see core/rebuild.php
    * @see core/modules/statistics/statistics.php
    */

    return require __DIR__ . '/../vendor/autoload.php';
    ```
```

### Изображения

Вставка изображений производится аналогично ссылкам, только с добавлением `!` перед "текстовой" частью.

```markdown
![Значение для alt атрибута](https://i.imgur.com/jjfUrNu.jpg)
```

## <a id="custom-syntax"></a>Собственный синтаксис

### Мета-информация

Мета-информация должна присутствовать в абсолютно каждом файле, являющимся документацией. Если данный блок не обнаружен в момент парсинга, данный файл не расценивается как содержимое для импорта.

Мета-информация, содержит в себе всю минимально необходимую и важную информацию, такую как уникальный идентификатор материала и его заголовок.

Мета-информация описывается в YAML-синтаксисе и полностью его поддерживает. Данный синтаксис должен быть обернут тройным дифисом `-` как в начале мета-информации, так и в конце. Все что находится между ними - должно быть в YAML формате.

```makrdown
---
id: content-id
title: Заголовок материала
---
```

Данный блок должен идти в начале файла, никакие пропуски перед его открытием не допускаются, иначе он будет помечем невалидным и пропустится, а следовательно, содержание не будет создано или обновлено.

Задавать можно что угодно, но проверяются и используются только определенные данные:

- `id`: Уникальный идентификатор материала. Строковое занчение, по сути, может содержать что угодно. Но используйте только латиницу в нижнем регистре, знаки тире, и в редких случаях - точки.
- `title`: Заголовок материала на странице. Данное значение пойдет в h1.
- `core`: (опционально) Если материал явно касается определенной версии друпала, здесь указывается его **мажорная** версия. Например 7 или 8. Никаких 8.x тут не должно быть. Только integer значения. Если этот параметр задан, id становится уникальным в пределах core, а не по всему содержимому. Для таких материалов автоматически добавляется приписка в алиасе `/docs/[core:version]/[id]`.
- `category`: (массив, опционально) Позволяет категоризировать материал по названию категории в пределах `core` версии (без неё тоже будет работать). Принимает следующие значения:
  - `area`: В этом  параметре указывается заголовок категории. Материалы в категории будут искаться по схожему заголовку.
  - `order`: (опционально) Указывает позицию данного материала в меню категории среди других материалов. Сортировка по возрастанию.
  - `title`: (опционально) Перепоределяет заголовок в меню категории на указанный здесь. Если не указано, будет использоваться значение `title`.
- `path`: (опционально) Позволяет переопределить алиас для материала. Пригодится если делается материал из одного цикла и нужно соблюдать его структуру. Данный путь указывается полность, автоматический шаблон `/docs/[core:version]/[id]` полностью игнорируется и вам нужно указывать путь полностью.
- `difficulty`: (опционально) Делает пометку для материала о его сложности. Используется в поиске для фильтрации, пока больше ни для чего. Пропускаются только определенные значения:
  - `basic`: Базовая сложность. Подразумевает что материал покрывает какие-то основы, не требующее определенных знаний. В основном для статей, где достаточно прочитать.
  - `medium`: Средняя сложность. Тут уже подразумеваются какие-либо базовые знания у пользователя. Возможно что-то придется проделать руками в админке или знать что-то ещё, например Composer. Код в данном случае писать не придется.
  - `advanced`: Продвинутая сложность. Данный уровень материала присваивается тем, которые касаются кода или требуют повышенных базовых знаний. 
- `labels`: (опционально) Массив из меток материала. На данный момент нигде кроме поиска не используется и не ясно будет ли. Применение не найдено, поэтому, можно пропускать.
- `search_keywords`: (опционально) Массив со строками, которые используются только в поиске, и имеют повышенный приоритет (выше только у заголовка материала). В идеале, должны иметь ключевые фразы, по которым, скорее всего, люди попытаются найти материал. Например, для Libraries API это - "как подключать js css", "как добавить скрипт на страницу" и т.д. То есть то, что в заголовке никак не отражено, но имеет прямое отношение к нему.
- `metatags`: (массив, опционально) Данный параметр позволяет задать окнкретные мета-теги для материала в принудительном порядке. На данный момент поддерживаются следующие переопределяемые значения:
  - `title`: (опционально) Позволяет переопределить заголовок страницы `<title></title>`, а также, все связанные метатеги `<meta name="title">`, `<meta name="twitter:title">`, `<meta property="og:title">`. Данное значение не влияет на `title` материала, он останется прежним и будет находиться в `<h1>`.
  - `description`: (опционально) Позволяет переопределить описание страницы. Влияет на следующие мета-теги: `<meta name="description">`, `<meta property="og:description">`

Пример

```markdown
---
id: create-module
core: 8
title: Создание модуля
path: /docs/8/modules/create
metatags:
  title: 'Drupal 8: Создание модуля'
  description: 'Создание собственного модуля в Drupal 8.'
search-keywords:
  - как создать свой модуль
  - где писать код
  - куда вставлять код
category:
  area: Модули
  title: Создание модуля
  order: 2
---
```

### Заметки

Позволяет добавлять различные выделяемые заметки на сайте. Всего существует 4 типа заметок:

1. `NOTE`: Обычная пометка, если вы хотите сконцентрировать внимание пользователя на чем-то важном ещё раз.
1. `WARNING`: Предупреждение о чем-то, например что можно что-то сломать или нужно сделать резервную копию перед проверкой.
1. `IMPORTANT`: Важная информацию, которую обазтельно стоит изучить.
1. `TIP`: Совет, подсказка. Например можно поисать какую-то неявную особенность, или дополнительную возможность, которая никак не повлияет на результат и смысл, но может оказаться приятным знанием кому-то.

Формат заметки имеют следующий:

```markdown
> [!NOTE]
> Заметка о чем либо. Поддерживает **маркдаун** внутри себя.
> Каждая новая строка должна содержать `>` до тех пор, пока это часть заметки.
>
> Все что находится внутри, воспринимается как маркдаун и не забываем, что параграфы отделяются пустой строкой. Две строки выше будут с `<br/>` переносом, а текущая, отдельным параграфом.
```
