---
id: modules
title: Модули
core: 8
search-keywords:
  - где куда писать вставлять код
---

**Модуль** — набор PHP, CSS, JS и прочих файлов которые расширяют возможности сайта и его функциональность. Включение функционала модуля производится путем установки (активация модуля в административном интерфейсе) модуля, а его отключение, при помощи удаления (процесс деактивации модуля в административном интерфейсе).

> [!NOTE]
> Рекомендуется использовать {Composer}(composer) для загрузки новых модулей.

> [!TIP]
> Вы можете включать и отключать модули при помощи команд {Drush} `drush en MODULENAME` и `drush pmu MODULENAME`, соответственно.


## Создание модуля

Процесс создания модуля достаточно простой и не требует серьзных навыков, тем не менее написание функционала уже может потребовать от вас определенные навыки в PHP.

Минимальный состав модуля — папка, которая станет корнем модуля, а также файл `*.info.yml`, описывающий модуль.

### Даем название модулю

У модуля обязательно должно быть название (машинное имя). Оно будет использовано Drupal для того чтобы взаимодействовать с вашим модулем. Для именования модуля есть определенные правила, которые нельзя нарушать:

- Название должно начинаться с буквы.
- Может содержать только латинские символы в нижнем регистре и нижнее подчеркивание.
- Не может содержать никаких пробелов.
- Не может называться одним из зарезервированных имен: `src`, `lib`, `vendor`, `assets`, `css`, `files`, `images`, `js`, `misc`, `templates`, `includes`, `fixtures`, `drupal`.
- Не может называться также, как модули, поставляемые ядром.

> [!WARNING]
> Крайне не рекомендуется использовать для названия модуля уже занятые имена на drupal.org. Особенно если вы планируете использовать одноименный контриб модуль, или публиковать свой.

### Создание папки для модуля

Например, вы хотите назвать свой будущий модуль `hello_world`, для этого потребуется сначала создать папку с соответствующим названием по одному из пути: `/modules/custom/hello_world` или `/sites/all/modules/hello_world` (только при использовании мультисайтинга). Вы можете не создавать папку `custom` и разместить модуль по пути `/modules/hello_world`, но это крайне не рекомендуется, так как ваши собственные модули для проекта будут перемешаны с контриб модулями.

> [!TIP]
> Лучшей практикой является создание собственных модулей по пути `/modules/custom/NAME`, а модули с drupal.org в `/modules/contrib/NAME`. Это позволит вам исключить загруженные модули из VCS (git), а также поможет легче ориентироваться где код под проект, а где готовые решения. Загружая модули при помощи `{Composer}(composer)`, они автоматически будут распологаться в `/modules/contrib`.

### Создание .info.yml файла

В папке, созданной для модуля, вы также должны создать файл с названием вашего модуля и `.info.yml` окончанием. Например, для модуля `hello_world` необходимо создать `hello_world.info.yml`. Данный файл обязательно должен иметь машинное название модуля.

В данном файле вы описываете базовую информацию вашего модуля.

#### Структура .info.yml файла

- **name**: Название модуля, отображаемое в административном интерфейсе. Например `name: Hello World Module`.
- **type**: Тип "расширения" друпал. Может принимать одно из следующих значений: module, theme, profile. В случае модулей, обязательно указывать "module". Например `type: module`.
- **core**: Версия ядра, для которой предназначен данный модуль. Для Drupal 8 это `8.x`. Например `core: 8.x`.
- **description**: (опционально) Описание модуля, отображаемое на странице списка модулей под названием. Например `description: Example Module description.`.
- **package**: (опцонально) Название группы, в которой необходимо расположить модуль в административном интерфейсе. По умолчанию все модули получают значение `Custom`, вы можете указывать собственное название. Например `package: Project name`. _Название группы обрабатывается `t()`, это означает, что строка будет переводимой и необходимо использовать только латинские названия._
- **dependencies**: (опционально) Список модулей, от которых зависит данный модуль. Название зависимостей должно быть в формате `{project}:{module}`, где `{project}` название проекта на drupal.org (например drupal.org/project/views - views) и `{module}` машинное название модуля. Вы также можете указать каждой зависимости ограничения по версии, например `yandex_yml:yandex_yml (>=8.x-1.x)`.
- **test_dependencies**: (опционально) В соответствии с "dependencies" указывается список зависимостей, необходимы для тестирования модуля при помощи DrupalCI, но которые не нужны для реального использования.
- **configure**: Если ваш модуль имеете настройки, вы можете указать название {маршрута}(routes:8) в данном параметре. Для активного модуля с данным значением, в списке модулей будет дополнительная кнопка для перехода в настройки. Например `configure: hello_world.settings`.
- **php**: (опционально) Указание минимальной версии PHP необходимой для работы модуля. Пользователи не смогут включить модуль, если версия, на которой работает сайт, не удовлетворяет данному требованию.
- **hidden**: (опционально) По умолчанию значение `false`, указав `true`, модуль не будет отображаться в списке модулей. Например, это хорошее решение для модулей с тестами или модулей с примерами, которые не предназначены для использования. Вы можете указать `$settings['extension_discovery_scan_tests'] = TRUE` в settings.php чтобы они начали отображаться.
- **Запрещенные для использования**: Данные файлы могут также содержать `version` и `project`. Данные значения добавляются в файл автоматически drupal.org, если вы публикуте модуль как полноценный проект. Для избежания проблем, не задавайте данные значение вручную.

## Ссылки

- [Drupal 8 Hello World: Пишем свой первый модуль](https://niklan.net/blog/66), Niklan, 2014